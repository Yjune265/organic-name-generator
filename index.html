<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Organic Name Generator</title>

  <link rel="stylesheet" href="css/kekule.css">
  
</head>
<body>
  <h1>Organic Name Generator</h1>

  <div id="editor" style="width:600px; height:400px; border:1px solid #ccc;" data-widget="Kekule.Editor.Composer"></div></div>

  <button onclick="generateName()">이름 생성하기</button>

  <script src="js/kekule.js"></script> 
  <script>
    let composer;

    window.onload = function() {

      //const container = document.getElementById('editor');

      composer = new Kekule.Editor.Composer('editor');
      
    };

    async function generateName() {
      //if (!composer) {
        //alert('Editor is not ready yet!');
        //return;
      //}

      var mol = getCurrMol();

      var smiles = Kekule.IO.saveFormatData(mol, 'smi');

      console.log('SMILES:', smiles);

      try {
        const response = await fetch(`https://cactus.nci.nih.gov/chemical/structure/${encodeURIComponent(smiles)}/iupac_name`);
        if (!response.ok) throw new Error('API 요청 실패');
        const name = await response.text();

        alert('IUPAC 이름: ' + name);
      } catch (err) {
        console.error(err);
        alert('이름을 가져오는 데 실패했습니다.');
      }

    }
  </script>
</body>
</html>
